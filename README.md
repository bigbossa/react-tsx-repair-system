# Repair System (React + TypeScript)

‡∏£‡∏∞‡∏ö‡∏ö‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡∏ã‡πà‡∏≠‡∏° ‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå‡∏™‡∏¥‡∏ô ‡πÅ‡∏•‡∏∞‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô ‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏î‡πâ‡∏ß‡∏¢ Next.js 16, TypeScript, React ‡πÅ‡∏•‡∏∞ PostgreSQL

## üìã Features

### üé´ Ticket Management
- ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏•‡∏∞‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÉ‡∏ö‡πÅ‡∏à‡πâ‡∏á‡∏ã‡πà‡∏≠‡∏° (Repair Tickets)
- ‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏á‡∏≤‡∏ô (Pending, In Progress, Completed)
- ‡πÅ‡∏™‡∏î‡∏á‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏ã‡πà‡∏≠‡∏°
- ‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô LINE Notify
- Export ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏õ‡πá‡∏ô Excel

### üíº Asset Management
- ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå‡∏™‡∏¥‡∏ô (Computer, Notebook, Printer)
- ‡∏£‡∏∞‡∏ö‡∏∏‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î (CPU, RAM, HDD, IP, MAC Address)
- Import/Export ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å Excel
- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Asset Code ‡∏ã‡πâ‡∏≥
- ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏™‡∏≤‡∏Ç‡∏≤ ‡πÅ‡∏ú‡∏ô‡∏Å ‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó
- DataTable ‡∏û‡∏£‡πâ‡∏≠‡∏° Pagination, Sorting, Filtering

### üë• User Management
- ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ (Admin/User)
- Import ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏à‡∏≤‡∏Å Excel
- ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏™‡∏≤‡∏Ç‡∏≤‡∏ó‡∏µ‡πà Admin ‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö
- ‡∏î‡∏π‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå‡∏™‡∏¥‡∏ô‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ
- DataTable ‡∏û‡∏£‡πâ‡∏≠‡∏° Search, Filter, Pagination

### ‚úÖ MA Checklist (Maintenance)
- ‡∏£‡∏∞‡∏ö‡∏ö Checklist ‡∏ö‡∏≥‡∏£‡∏∏‡∏á‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå
- ‡πÅ‡∏¢‡∏Å Checklist ‡∏ï‡∏≤‡∏°‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó (Computer, Printer)
- ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏ó‡∏≥ MA
- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏ó‡∏≥ MA ‡∏ã‡πâ‡∏≥‡πÉ‡∏ô‡∏£‡∏≠‡∏ö 2 ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô
- ‡πÅ‡∏à‡πâ‡∏á‡∏ã‡πà‡∏≠‡∏°‡πÑ‡∏î‡πâ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡∏´‡∏≤‡∏Å‡∏û‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤

### üìä Dashboard & Reports
- ‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏á‡∏≤‡∏ô‡∏ã‡πà‡∏≠‡∏°
- ‡∏Å‡∏£‡∏≤‡∏ü‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
- ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏ï‡∏≤‡∏°‡∏™‡∏≤‡∏Ç‡∏≤ ‡πÅ‡∏ú‡∏ô‡∏Å
- Export ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡πÄ‡∏õ‡πá‡∏ô Excel

## üõ† Tech Stack

### Frontend
- **Next.js 16** - React Framework with App Router
- **TypeScript** - Type Safety
- **Tailwind CSS** - Styling
- **shadcn/ui** - UI Components
- **TanStack Table** - Data Tables
- **SweetAlert2** - Dialogs & Alerts
- **XLSX** - Excel Import/Export
- **Recharts** - Charts & Graphs

### Backend
- **Next.js API Routes** - Backend API
- **PostgreSQL** - Database
- **node-postgres (pg)** - Database Driver

### Development Tools
- **pnpm** - Package Manager
- **ESLint** - Code Linting
- **PM2** - Process Manager

## üì¶ Installation

### Prerequisites
- Node.js 18+ 
- PostgreSQL 14+
- pnpm

### 1. Clone Repository
```bash
git clone https://github.com/bigbossa/react-tsx-repair-system.git
cd react-tsx-repair-system
```

### 2. Install Dependencies
```bash
pnpm install
```

### 3. Database Setup

Create PostgreSQL databases:
```sql
-- Repair System Database
CREATE DATABASE repair_system;

-- Dashboard Database  
CREATE DATABASE dashboard;
```

Import schema:
```bash
psql -U postgres -d repair_system < schema/repair_system.sql
psql -U postgres -d dashboard < schema/dashboard.sql
```

### 4. Environment Variables

Create `.env.local`:
```env
# Database - Repair System
DB_REPAIR_HOST=localhost
DB_REPAIR_PORT=5432
DB_REPAIR_USER=postgres
DB_REPAIR_PASSWORD=your_password
DB_REPAIR_DATABASE=repair_system

# Database - Dashboard
DB_DASHBOARD_HOST=localhost
DB_DASHBOARD_PORT=5432
DB_DASHBOARD_USER=postgres
DB_DASHBOARD_PASSWORD=your_password
DB_DASHBOARD_DATABASE=dashboard

# LINE Notify (Optional)
LINE_NOTIFY_TOKEN=your_line_token
```

### 5. Build & Run

Development:
```bash
pnpm dev
# Runs on http://localhost:1002
```

Production:
```bash
pnpm build
pnpm start
```

With PM2:
```bash
pm2 start ecosystem.config.js --only repair-frontend
```

## üóÇ Project Structure

```
react-tsx-repair-system/
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ api/                    # API Routes
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ assets/            # Assets API
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ route.ts       # GET, POST assets
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ [id]/route.ts  # PUT, DELETE asset
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ export/route.ts # Export all assets
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ tickets/           # Tickets API
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ users/             # Users API
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ route.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ [id]/route.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ import/route.ts # Import users from Excel
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ maintenance-records/ # MA Checklist API
‚îÇ   ‚îú‚îÄ‚îÄ assets/                # Assets Page
‚îÇ   ‚îú‚îÄ‚îÄ checklist/             # MA Checklist Page
‚îÇ   ‚îú‚îÄ‚îÄ dashboard/             # Dashboard Page
‚îÇ   ‚îú‚îÄ‚îÄ tickets/               # Tickets Page
‚îÇ   ‚îú‚îÄ‚îÄ users/                 # Users Page
‚îÇ   ‚îú‚îÄ‚îÄ auth-context.tsx       # Authentication Context
‚îÇ   ‚îî‚îÄ‚îÄ layout.tsx             # Root Layout
‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îú‚îÄ‚îÄ ui/                    # shadcn/ui Components
‚îÇ   ‚îú‚îÄ‚îÄ app-header.tsx         # App Header
‚îÇ   ‚îú‚îÄ‚îÄ assets-data-table.tsx  # Assets DataTable
‚îÇ   ‚îî‚îÄ‚îÄ users-data-table.tsx   # Users DataTable
‚îú‚îÄ‚îÄ lib/
‚îÇ   ‚îú‚îÄ‚îÄ db.ts                  # Database Connection
‚îÇ   ‚îú‚îÄ‚îÄ api.ts                 # API Fetch Helper
‚îÇ   ‚îî‚îÄ‚îÄ utils.ts               # Utility Functions
‚îú‚îÄ‚îÄ public/                    # Static Files
‚îî‚îÄ‚îÄ styles/                    # Global Styles
```

## üîå API Endpoints

### Assets
```
GET    /api/assets              # List assets (with pagination, filters)
POST   /api/assets              # Create asset
GET    /api/assets/export       # Export all assets
GET    /api/assets/[id]         # Get asset by ID
PUT    /api/assets/[id]         # Update asset
DELETE /api/assets/[id]         # Delete asset
```

### Users
```
GET    /api/users               # List users
POST   /api/users               # Create user
POST   /api/users/import        # Import users from Excel
GET    /api/users/[id]          # Get user by ID
PUT    /api/users/[id]          # Update user
DELETE /api/users/[id]          # Delete user
```

### Tickets
```
GET    /api/tickets             # List tickets
POST   /api/tickets             # Create ticket
GET    /api/tickets/[id]        # Get ticket
PUT    /api/tickets/[id]        # Update ticket
DELETE /api/tickets/[id]        # Delete ticket
```

### MA Checklist
```
GET    /api/maintenance-records # List MA records
POST   /api/maintenance-records # Create MA record
```

## üöÄ Development

### Run Development Server
```bash
pnpm dev
```

### Build for Production
```bash
pnpm build
```

### Run Production Server
```bash
pnpm start
```

### Lint Code
```bash
pnpm lint
```

## üì± Features Detail

### Import from Excel

**Assets Import**
- Support .xlsx, .xls files
- Auto-detect duplicate Asset Code
- Preview before import
- Show import results (success/failed)

**Users Import**
- Support .xlsx, .xls files  
- Auto-update if username exists
- Role mapping (admin/user)
- Template download available

Required columns:
- Assets: `asset_code`, `user_id`, `user_name`, `company`, `site`, `department`, `device_name`, etc.
- Users: `username`, `password`, `name`, `role`, `site`, `department`

### DataTable Features
- ‚úÖ Sorting (multi-column)
- ‚úÖ Pagination (10/20/30/50/100 per page)
- ‚úÖ Global Search
- ‚úÖ Column Filtering
- ‚úÖ Column Visibility Toggle
- ‚úÖ Responsive Design

### Authentication
- Login with username/password
- Role-based access (Admin/User)
- Session management
- Protected routes

## üîß Configuration

### Database Tables

**Main Tables:**
- `Assets` - Asset information
- `useryc` - Users
- `tickets` - Repair tickets
- `maintenance_records` - MA checklist records

### PM2 Configuration

`ecosystem.config.js`:
```javascript
{
  name: 'repair-frontend',
  script: 'pnpm',
  args: 'start',
  cwd: './app/react-tsx-repair-system',
  instances: 1,
  autorestart: true,
  watch: false,
  env: {
    NODE_ENV: 'production',
    PORT: 1002
  }
}
```

## üåê Deployment

### With PM2
```bash
# Start
pm2 start ecosystem.config.js --only repair-frontend

# Restart
pm2 restart repair-frontend

# Stop
pm2 stop repair-frontend

# Logs
pm2 logs repair-frontend
```

### Access URLs
- Development: http://localhost:1002
- Production: http://192.168.19.37:3000/repair (via proxy)

## üìù Notes

### Excel Import Format
Make sure Excel files follow the correct format:
- First row must be headers
- Required fields must not be empty
- Date format: YYYY-MM-DD
- Numbers should be in number format (not text)

### MA Checklist Cycle
- Computer/Notebook: 2 months cycle
- Printer: 2 months cycle
- System warns if MA already done within 2 months

### LINE Notify
Configure LINE_NOTIFY_TOKEN in `.env.local` to enable notifications for:
- New tickets
- Ticket status changes
- MA completion

## ü§ù Contributing

1. Fork the repository
2. Create feature branch (`git checkout -b feature/AmazingFeature`)
3. Commit changes (`git commit -m 'Add AmazingFeature'`)
4. Push to branch (`git push origin feature/AmazingFeature`)
5. Open Pull Request

## üìÑ License

This project is proprietary software.

## üë®‚Äçüíª Authors

- Development Team - YC Corporation

## üìû Support

For support, contact IT Department or create an issue in the repository.

---

**Version:** 1.0.0  
**Last Updated:** January 2026
